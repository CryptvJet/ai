<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Admin Panel</title>
    <link rel="stylesheet" href="../css/admin.css">
    <link rel="stylesheet" href="../css/ai-site.css">
</head>
<body>
    <div class="admin-container">
        <header class="admin-header">
            <h1>üõ†Ô∏è My AI Admin Panel</h1>
            <div class="header-actions">
                <button onclick="location.href='../index.html'" class="btn-back">‚Üê Back to Chat</button>
                <button onclick="saveAllSettings()" class="btn-save">üíæ Save All</button>
                <button onclick="logout()" class="btn-logout">üö™ Logout</button>
            </div>
        </header>

        <nav class="admin-nav">
            <button class="nav-btn active" onclick="showSection('identity')">ü§ñ Identity</button>
            <button class="nav-btn" onclick="showSection('memory')">üß† Memory Management</button>
            <button class="nav-btn" onclick="showSection('responses')">üí¨ Responses</button>
            <button class="nav-btn" onclick="showSection('conversations')">üìä Conversations</button>
            <button class="nav-btn" onclick="showSection('learning')">üß† Learning</button>
            <button class="nav-btn" onclick="showSection('database')">üóÑÔ∏è Database Queries</button>
            <button class="nav-btn" onclick="showSection('console')">üîç Console</button>
            <button class="nav-btn" onclick="showSection('integrations')">üîó Integrations</button>
        </nav>

        <main class="admin-content">
            <!-- Identity Section -->
            <section id="identity" class="admin-section active">
                <h2>AI Identity & Personality</h2>
                
                <div class="form-group">
                    <label for="aiName">AI Name:</label>
                    <input type="text" id="aiName" value="ai" placeholder="Current AI name">
                    <small>The AI can suggest its own name based on conversations</small>
                </div>

                <div class="form-group">
                    <label for="personality">Personality Traits:</label>
                    <textarea id="personality" rows="3" placeholder="helpful,analytical,curious,friendly">helpful,analytical,curious</textarea>
                    <small>Comma-separated personality traits</small>
                </div>

                <div class="form-group">
                    <label for="responseStyle">Response Style:</label>
                    <select id="responseStyle">
                        <option value="conversational">Conversational</option>
                        <option value="formal">Formal</option>
                        <option value="casual">Casual</option>
                        <option value="technical">Technical</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="systemPrompt">System Prompt:</label>
                    <textarea id="systemPrompt" rows="5" placeholder="Base instructions for the AI...">You are an AI assistant specialized in analyzing PulseCore simulations and helping with data analysis. You have access to nova events, pattern data, and variables calculations.</textarea>
                </div>

                <div class="form-group">
                    <label for="conversationDepth">Conversation Depth:</label>
                    <select id="conversationDepth">
                        <option value="light">Light</option>
                        <option value="medium" selected>Medium</option>
                        <option value="deep">Deep</option>
                    </select>
                    <small>How deep should conversations typically go</small>
                </div>

                <div class="form-group">
                    <label for="maxConversationLength">Max Conversation Length:</label>
                    <input type="number" id="maxConversationLength" min="1" max="500" value="100" placeholder="100">
                    <small>Maximum number of messages in a single conversation (1-500)</small>
                </div>

                <!-- Timezone Selection -->
                <div class="form-group">
                    <label for="aiTimezone">Timezone:</label>
                    <select id="aiTimezone" name="ai_timezone">
                        <option value="America/New_York">Eastern Time (New York)</option>
                        <option value="America/Chicago">Central Time (Chicago)</option>
                        <option value="America/Denver">Mountain Time (Denver)</option>
                        <option value="America/Los_Angeles">Pacific Time (Los Angeles)</option>
                        <option value="America/Phoenix">Arizona Time (Phoenix)</option>
                        <option value="America/Anchorage">Alaska Time (Anchorage)</option>
                        <option value="Pacific/Honolulu">Hawaii Time (Honolulu)</option>
                        <option value="UTC">UTC (Coordinated Universal Time)</option>
                        <option value="Europe/London">GMT (London)</option>
                        <option value="Europe/Paris">CET (Paris/Berlin)</option>
                        <option value="Europe/Rome">CET (Rome/Madrid)</option>
                        <option value="Europe/Moscow">MSK (Moscow)</option>
                        <option value="Asia/Tokyo">JST (Tokyo)</option>
                        <option value="Asia/Shanghai">CST (Beijing/Shanghai)</option>
                        <option value="Asia/Mumbai">IST (Mumbai/Delhi)</option>
                        <option value="Asia/Dubai">GST (Dubai)</option>
                        <option value="Australia/Sydney">AEDT (Sydney)</option>
                        <option value="Australia/Melbourne">AEDT (Melbourne)</option>
                        <option value="Pacific/Auckland">NZDT (Auckland)</option>
                    </select>
                    <small class="form-text">Select your timezone for accurate time responses and conversation timestamps</small>
                </div>

                <div class="form-group toggle-group">
                    <label class="toggle-switch">
                        <input type="checkbox" id="askForName" checked>
                        <span class="toggle-slider"></span>
                        Ask for User Name
                    </label>
                    <small>Should the AI ask for the user's name during conversations</small>
                </div>

                <div class="form-group toggle-group">
                    <label class="toggle-switch">
                        <input type="checkbox" id="dailyCheckIns" checked>
                        <span class="toggle-slider"></span>
                        Daily Check-ins
                    </label>
                    <small>Enable daily check-in conversations with users</small>
                </div>

                <div class="form-group toggle-group">
                    <label class="toggle-switch">
                        <input type="checkbox" id="followUpQuestions" checked>
                        <span class="toggle-slider"></span>
                        Follow-up Questions
                    </label>
                    <small>Should the AI ask follow-up questions to deepen conversations</small>
                </div>

                <div class="form-group toggle-group">
                    <label class="toggle-switch">
                        <input type="checkbox" id="usePersonalResponses" checked>
                        <span class="toggle-slider"></span>
                        Personal Responses
                    </label>
                    <small>Use personalized responses based on user history and preferences</small>
                </div>

                <div class="form-group toggle-group">
                    <label class="toggle-switch">
                        <input type="checkbox" id="learningEnabled" checked>
                        <span class="toggle-slider"></span>
                        Learning Mode
                    </label>
                    <small>Allow the AI to learn and adapt from conversations</small>
                </div>

                <div class="form-group toggle-group">
                    <label class="toggle-switch">
                        <input type="checkbox" id="pulsecoreIntegration" checked>
                        <span class="toggle-slider"></span>
                        PulseCore Integration
                    </label>
                    <small>Enable integration with PulseCore database and calculations</small>
                </div>

                <div class="form-group toggle-group">
                    <label class="toggle-switch">
                        <input type="checkbox" id="variablesIntegration" checked>
                        <span class="toggle-slider"></span>
                        Variables Integration
                    </label>
                    <small>Enable dynamic variable integration in responses</small>
                </div>

                <div class="form-group toggle-group">
                    <label class="toggle-switch">
                        <input type="checkbox" id="voiceEnabled" checked>
                        <span class="toggle-slider"></span>
                        Voice Features
                    </label>
                    <small>Enable voice recognition and text-to-speech features</small>
                </div>

            </section>

            <!-- Memory Management Section -->
            <section id="memory" class="admin-section">
                <h2>üß† Memory Management</h2>
                <p class="section-description">Configure conversation memory limits and threshold behavior</p>
                
                <div class="settings-grid">
                    <div class="setting-card">
                        <h3>Memory Limits</h3>
                        
                        <div class="form-group">
                            <label for="memoryLimitMB">Memory Limit: <span id="memoryLimitDisplay">5 MB</span></label>
                            <input type="range" id="memoryLimitMB" min="1" max="20" value="5" step="0.5" oninput="updateMemoryDisplay()">
                            <small>Maximum conversation memory before threshold actions trigger</small>
                        </div>

                        <div class="form-group">
                            <label for="warningThreshold">Warning Threshold: <span id="warningDisplay">85%</span></label>
                            <input type="range" id="warningThreshold" min="70" max="95" value="85" step="5" oninput="updateThresholdDisplays()">
                            <small>Percentage at which warning indicators appear</small>
                        </div>

                        <div class="form-group">
                            <label for="criticalThreshold">Critical Threshold: <span id="criticalDisplay">99%</span></label>
                            <input type="range" id="criticalThreshold" min="95" max="99" value="99" step="1" oninput="updateThresholdDisplays()">
                            <small>Percentage at which refresh dialog is triggered</small>
                        </div>
                    </div>

                    <div class="setting-card">
                        <h3>Refresh Options</h3>
                        
                        <div class="form-group">
                            <label for="defaultRefreshOption">Default Refresh Option:</label>
                            <select id="defaultRefreshOption">
                                <option value="full">Full Refresh - Clear all conversation history</option>
                                <option value="partial" selected>Partial Refresh - Keep recent messages</option>
                                <option value="zip">Zip Refresh - Compress conversation intelligently</option>
                            </select>
                            <small>Default suggestion when memory limit is reached</small>
                        </div>

                        <div class="form-group">
                            <label for="compressionRatio">Compression Ratio: <span id="compressionDisplay">10%</span></label>
                            <input type="range" id="compressionRatio" min="5" max="25" value="10" step="5" oninput="updateCompressionDisplay()">
                            <small>Percentage of conversation to retain during zip refresh</small>
                        </div>

                        <div class="form-group">
                            <label for="autoRefreshEnabled">Auto-refresh on Critical:</label>
                            <div class="toggle-switch">
                                <input type="checkbox" id="autoRefreshEnabled">
                                <label for="autoRefreshEnabled" class="toggle-label">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <small>Automatically perform default refresh when critical threshold is reached</small>
                        </div>
                    </div>
                </div>

                <div class="preview-section">
                    <h3>Settings Preview</h3>
                    <div class="threshold-preview">
                        <div class="preview-meter">
                            <div class="preview-bar" id="previewBar"></div>
                            <div class="preview-labels">
                                <span class="warning-marker" id="warningMarker">Warning</span>
                                <span class="critical-marker" id="criticalMarker">Critical</span>
                            </div>
                        </div>
                        <div class="preview-info">
                            <p>Memory Usage Simulation</p>
                            <div class="preview-stats">
                                <span>Warning: <span id="warningMB">4.25 MB</span></span>
                                <span>Critical: <span id="criticalMB">4.95 MB</span></span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="memory-actions">
                    <button onclick="testThresholdScenario('warning')" class="btn-secondary">üü° Test Warning</button>
                    <button onclick="testThresholdScenario('critical')" class="btn-warning">üî¥ Test Critical</button>
                    <button onclick="resetMemorySettings()" class="btn-secondary">‚Üª Reset to Defaults</button>
                    <button onclick="exportMemorySettings()" class="btn-primary">üì§ Export Settings</button>
                    <button onclick="saveMemorySettings()" class="btn-save">üíæ Save Memory Settings</button>
                </div>
            </section>

            <!-- Responses Section -->
            <section id="responses" class="admin-section">
                <h2>Response Templates</h2>
                
                <div class="responses-controls">
                    <button onclick="addNewTemplate()" class="btn-primary">+ Add Template</button>
                    <button onclick="importTemplates()" class="btn-secondary">üì• Import</button>
                    <button onclick="exportTemplates()" class="btn-secondary">üì§ Export</button>
                </div>

                <div class="templates-container" id="templatesContainer">
                    <!-- Response templates will be loaded here -->
                </div>
            </section>

            <!-- Conversations Section -->
            <section id="conversations" class="admin-section">
                <h2>Conversation Analytics</h2>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>Total Conversations</h3>
                        <div class="stat-value" id="totalConversations">-</div>
                    </div>
                    <div class="stat-card">
                        <h3>Total Messages</h3>
                        <div class="stat-value" id="totalMessages">-</div>
                    </div>
                    <div class="stat-card">
                        <h3>Avg. Response Time</h3>
                        <div class="stat-value" id="avgResponseTime">-</div>
                    </div>
                    <div class="stat-card">
                        <h3>Success Rate</h3>
                        <div class="stat-value" id="successRate">-</div>
                    </div>
                </div>

                <div class="conversations-table">
                    <h3>Recent Conversations</h3>
                    <table id="conversationsTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Started</th>
                                <th>Messages</th>
                                <th>Duration</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Conversations will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Integrations Section -->
            <section id="integrations" class="admin-section">
                <h2>Database Integrations</h2>
                
                <div class="integration-grid">
                    <div class="integration-card">
                        <h3>üåä PulseCore</h3>
                        <div class="integration-status" id="pulsecoreStatus">
                            <span class="status-indicator"></span>
                            <span class="status-text">Checking...</span>
                        </div>
                        <div class="time-toggle">
                            <button class="time-btn active" onclick="setPulseCoreTimeframe('week')">Week</button>
                            <button class="time-btn" onclick="setPulseCoreTimeframe('month')">Month</button>
                            <button class="time-btn" onclick="setPulseCoreTimeframe('all')">All Time</button>
                        </div>
                        <div class="integration-stats">
                            <p>Nova Events: <span id="novaCount">-</span></p>
                            <p>Climaxes: <span id="climaxesCount">-</span></p>
                            <p>Climax Groups: <span id="climaxCount">-</span></p>
                        </div>
                        <button onclick="testPulseCoreConnection()" class="btn-test">Test Connection</button>
                    </div>

                    <div class="integration-card">
                        <h3>üìä Variables</h3>
                        <div class="integration-status" id="variablesStatus">
                            <span class="status-indicator"></span>
                            <span class="status-text">Checking...</span>
                        </div>
                        <div class="integration-stats">
                            <p>Variables: <span id="variableCount">-</span></p>
                            <p>Calculations: <span id="calculationCount">-</span></p>
                            <p>Last Update: <span id="lastVarTime">-</span></p>
                        </div>
                        <button onclick="testVariablesConnection()" class="btn-test">Test Connection</button>
                    </div>

                    <div class="integration-card">
                        <h3>ü§ñ Ollama AI Server</h3>
                        <div class="integration-status" id="pcaiStatus">
                            <span class="status-indicator"></span>
                            <span class="status-text">Checking...</span>
                        </div>
                        <div class="integration-stats">
                            <p>Model: <span id="currentModel">-</span></p>
                            <p>Models Available: <span id="gpuMemory">-</span></p>
                            <p>Response Time: <span id="pcResponseTime">-</span></p>
                        </div>
                        <button onclick="testPCAIConnection()" class="btn-test">Test Connection</button>
                    </div>

                    <div class="integration-card">
                        <h3>üåâ Bridge Connection</h3>
                        <div class="integration-status" id="bridgeStatus">
                            <span class="status-indicator"></span>
                            <span class="status-text">Checking...</span>
                        </div>
                        <div class="integration-stats">
                            <p>Host: <span id="bridgeHost">localhost</span></p>
                            <p>Port: <span id="bridgePort">8080</span></p>
                            <p>Type: <span id="bridgeType">HTTP</span></p>
                            <p>Response Time: <span id="bridgeResponseTime">-</span></p>
                        </div>
                        <button onclick="testBridgeConnection()" class="btn-test">Test Connection</button>
                    </div>
                </div>

                <div class="section-divider"></div>

                <h3>üåâ Bridge Connection Settings</h3>
                
                <div class="bridge-config-form">
                    <div class="form-group">
                        <label for="bridgeHostConfig">Bridge Host:</label>
                        <input type="text" id="bridgeHostConfig" value="localhost" placeholder="localhost">
                        <small>Website URL or IP address of your bridge server</small>
                    </div>

                    <div class="form-group">
                        <label for="bridgeTypeConfig">Connection Type:</label>
                        <select id="bridgeTypeConfig" onchange="toggleConnectionSettings()">
                            <option value="HTTP" selected>HTTP</option>
                            <option value="HTTPS">HTTPS</option>
                            <option value="WebSocket">WebSocket</option>
                        </select>
                        <small>Communication protocol to use</small>
                    </div>

                    <div class="form-group">
                        <label for="bridgePortConfig">Bridge Port:</label>
                        <input type="number" id="bridgePortConfig" value="8080" placeholder="8080">
                        <small id="portHelpText">Port number where your bridge service is running</small>
                    </div>

                    <div class="form-group">
                        <label for="bridgeApiKeyConfig">API Key:</label>
                        <input type="password" id="bridgeApiKeyConfig" placeholder="Optional API key for authentication">
                        <small>Leave empty if no authentication is required</small>
                    </div>

                    <!-- SSL Certificate Configuration (Only for HTTPS) -->
                    <div id="sslConfigSection" class="ssl-config-section" style="display: none;">
                        <div class="section-divider"></div>
                        <h4>üîí SSL Certificate Settings</h4>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="sslCertFile">SSL Certificate (.crt/.pem):</label>
                                <input type="file" id="sslCertFile" accept=".crt,.pem,.cert" class="file-input">
                                <button onclick="uploadSSLCertificate()" class="btn-upload" disabled>üì§ Upload Certificate</button>
                                <small>Select certificate file first, then click upload</small>
                            </div>
                            
                            <div class="form-group">
                                <label for="sslKeyFile">Private Key (.key):</label>
                                <input type="file" id="sslKeyFile" accept=".key,.pem" class="file-input">
                                <button onclick="uploadSSLKey()" class="btn-upload" disabled>üì§ Upload Private Key</button>
                                <small>Select private key file first, then click upload</small>
                            </div>
                        </div>

                        <div class="ssl-status-display">
                            <div class="status-item">
                                <span class="status-label">Certificate Status:</span>
                                <span id="sslCertStatus" class="status-value">Not uploaded</span>
                            </div>
                            <div class="status-item">
                                <span class="status-label">Key Status:</span>
                                <span id="sslKeyStatus" class="status-value">Not uploaded</span>
                            </div>
                            <div class="status-item">
                                <span class="status-label">HTTPS Status:</span>
                                <span id="httpsStatus" class="status-value">Enabled</span>
                            </div>
                        </div>
                    </div>

                    <div class="bridge-config-actions">
                        <button onclick="testBridgeConnection()" class="btn-secondary">üß™ Test Connection</button>
                        <button onclick="saveBridgeConfiguration()" class="btn-primary">üíæ Save Settings</button>
                    </div>

                    <div id="sslStatusMessage" class="status-message"></div>
                </div>

                <!-- Ollama Configuration Section -->
                <div class="bridge-config-section">
                    <div class="bridge-config-header">
                        <h3>ü§ñ Ollama AI Server Configuration</h3>
                        <p>Configure connection to your Ollama AI server</p>
                    </div>

                    <div class="bridge-config-content">
                        <div class="bridge-form-grid">
                            <div class="form-group">
                                <label for="ollamaHost">Server Host</label>
                                <input type="text" id="ollamaHost" class="form-control" placeholder="localhost" value="localhost">
                            </div>

                            <div class="form-group">
                                <label for="ollamaPort">Server Port</label>
                                <input type="number" id="ollamaPort" class="form-control" placeholder="11434" value="11434">
                            </div>

                            <div class="form-group">
                                <label for="ollamaProtocol">Protocol</label>
                                <select id="ollamaProtocol" class="form-control">
                                    <option value="http">HTTP</option>
                                    <option value="https">HTTPS</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="ollamaModel">Default Model</label>
                                <input type="text" id="ollamaModel" class="form-control" placeholder="llama3.2" value="llama3.2">
                            </div>
                        </div>

                        <div class="bridge-status">
                            <div class="status-grid">
                                <div class="status-item">
                                    <span class="status-label">Connection:</span>
                                    <span id="ollamaConnectionStatus" class="status-value">Testing...</span>
                                </div>
                                <div class="status-item">
                                    <span class="status-label">Models Available:</span>
                                    <span id="ollamaModelsCount" class="status-value">-</span>
                                </div>
                                <div class="status-item">
                                    <span class="status-label">Response Time:</span>
                                    <span id="ollamaResponseTime" class="status-value">-</span>
                                </div>
                            </div>
                        </div>

                        <div class="bridge-config-actions">
                            <button onclick="testOllamaConnection()" class="btn-secondary">üß™ Test Ollama</button>
                            <button onclick="saveOllamaConfiguration()" class="btn-primary">üíæ Save Settings</button>
                        </div>

                        <div id="ollamaStatusMessage" class="status-message"></div>
                    </div>

                    <div class="section-divider"></div>

                    <!-- AI Database Configuration Section -->
                    <h3>ü§ñ AI Database Configuration</h3>
                    
                    <div class="database-config-form">
                        <div class="form-group">
                            <label for="aiDbServer">AI Database Server:</label>
                            <input type="text" id="aiDbServer" placeholder="Enter server hostname">
                            <small>Server hostname or IP address for AI database</small>
                        </div>

                        <div class="form-group">
                            <label for="aiDbName">AI Database Name:</label>
                            <input type="text" id="aiDbName" placeholder="Enter AI database name">
                            <small>Name of the AI database</small>
                        </div>

                        <div class="form-group">
                            <label for="aiDbUsername">AI Username:</label>
                            <input type="text" id="aiDbUsername" placeholder="Enter database username">
                            <small>AI database username</small>
                        </div>

                        <div class="form-group">
                            <label for="aiDbPassword">AI Password:</label>
                            <input type="password" id="aiDbPassword" placeholder="Enter AI database password">
                            <small>AI database password (will be encrypted)</small>
                        </div>

                        <div class="form-group">
                            <label for="aiDbPort">AI Port:</label>
                            <input type="number" id="aiDbPort" value="3306" placeholder="3306">
                            <small>AI database port (default: 3306)</small>
                        </div>

                        <div class="database-config-actions">
                            <button onclick="testAIDatabaseConnection()" class="btn-secondary">üß™ Test AI Database</button>
                            <button onclick="saveAIDatabaseConfiguration()" class="btn-primary">üíæ Save AI Settings</button>
                        </div>

                        <div id="aiDbStatusMessage" class="status-message"></div>
                    </div>

                    <div class="section-divider"></div>

                    <!-- PulseCore Database Configuration Section -->
                <h3>üíæ PulseCore Database Configuration</h3>
                
                <div class="database-config-form">
                    <div class="form-group">
                        <label for="pulsecoreDbServer">Database Server:</label>
                        <input type="text" id="pulsecoreDbServer" value="localhost" placeholder="localhost">
                        <small>Server hostname or IP address</small>
                    </div>

                    <div class="form-group">
                        <label for="pulsecoreDbName">Database Name:</label>
                        <input type="text" id="pulsecoreDbName" value="pulsecore" placeholder="pulsecore">
                        <small>Name of the PulseCore database</small>
                    </div>

                    <div class="form-group">
                        <label for="pulsecoreDbUsername">Username:</label>
                        <input type="text" id="pulsecoreDbUsername" value="root" placeholder="root">
                        <small>Database username</small>
                    </div>

                    <div class="form-group">
                        <label for="pulsecoreDbPassword">Password:</label>
                        <input type="password" id="pulsecoreDbPassword" placeholder="Enter database password">
                        <small>Database password (will be encrypted)</small>
                    </div>

                    <div class="form-group">
                        <label for="pulsecoreDbPort">Port:</label>
                        <input type="number" id="pulsecoreDbPort" value="3306" placeholder="3306">
                        <small>Database port (default: 3306)</small>
                    </div>

                    <div class="database-config-actions">
                        <button onclick="testPulseCoreConnection()" class="btn-secondary">üß™ Test PulseCore & Variables</button>
                        <button onclick="savePulseCoreConfig()" class="btn-primary">üíæ Save PulseCore</button>
                    </div>

                    <div id="pulsecoreDbStatusMessage" class="status-message"></div>
                </div>

            </section>

            <!-- Learning Section -->
            <section id="learning" class="admin-section">
                <h2>AI Learning & Patterns</h2>
                
                <div class="learning-controls">
                    <label class="toggle-switch">
                        <input type="checkbox" id="learningEnabled" checked>
                        <span class="toggle-slider"></span>
                        Enable Learning from Conversations
                    </label>
                </div>

                <div class="learning-stats">
                    <h3>Learned Patterns</h3>
                    <div class="patterns-container" id="patternsContainer">
                        <!-- Learned patterns will be displayed here -->
                    </div>
                </div>

                <div class="learning-actions">
                    <button onclick="analyzeConversations()" class="btn-primary">üîç Analyze Conversations</button>
                    <button onclick="clearLearningData()" class="btn-danger">üóëÔ∏è Clear Learning Data</button>
                    <button onclick="exportLearningData()" class="btn-secondary">üì§ Export Patterns</button>
                </div>
            </section>

            <!-- Database Queries Section -->
            <section id="database" class="admin-section">
                <h2>Database Query Management</h2>
                <p class="section-description">Configure Zin's responses to PulseCore database queries</p>
                
                <div class="database-controls">
                    <button onclick="addNewTableConfig()" class="btn-primary">+ Add Table Configuration</button>
                    <button onclick="refreshTableRegistry()" class="btn-secondary">üîÑ Refresh Tables</button>
                    <button onclick="testDatabaseConnection()" class="btn-secondary">üîó Test Connection</button>
                </div>

                <!-- Table Registry Overview -->
                <div class="table-registry">
                    <h3>Available PulseCore Tables</h3>
                    <div class="registry-stats">
                        <div class="stat-item">
                            <span class="stat-label">Tables Found:</span>
                            <span class="stat-value" id="tablesCount">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Configured:</span>
                            <span class="stat-value" id="configuredCount">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Active:</span>
                            <span class="stat-value" id="activeCount">0</span>
                        </div>
                    </div>
                </div>

                <!-- Table Configurations -->
                <div class="table-configurations">
                    <h3>Table Configurations</h3>
                    <div id="tableConfigsContainer" class="configs-container">
                        <!-- Table configurations will be loaded here -->
                    </div>
                </div>

                <!-- Configuration Modal -->
                <div id="tableConfigModal" class="modal" style="display: none;">
                    <div class="modal-content large-modal">
                        <div class="modal-header">
                            <h3 id="modalTitle">Configure Table Query</h3>
                            <button onclick="closeTableConfigModal()" class="modal-close">&times;</button>
                        </div>
                        <div class="modal-body">
                            <form id="tableConfigForm">
                                <input type="hidden" id="configId" value="">
                                
                                <!-- Table Selection -->
                                <div class="form-group">
                                    <label for="tableName">Table Name</label>
                                    <select id="tableName" required>
                                        <option value="">Select a table...</option>
                                    </select>
                                </div>

                                <!-- Query Patterns -->
                                <div class="form-group">
                                    <label for="triggerPatterns">Trigger Patterns</label>
                                    <div class="pattern-builder">
                                        <div id="modalPatternsContainer" class="patterns-list">
                                            <!-- Pattern items will be added here -->
                                        </div>
                                        <button type="button" onclick="addTriggerPattern()" class="btn-small btn-secondary">+ Add Pattern</button>
                                    </div>
                                </div>

                                <!-- Search Fields -->
                                <div class="form-group">
                                    <label for="searchFields">Search Fields</label>
                                    <div class="fields-builder">
                                        <div id="searchFieldsContainer" class="fields-list">
                                            <!-- Search field items will be added here -->
                                        </div>
                                        <button type="button" onclick="addSearchField()" class="btn-small btn-secondary">+ Add Field</button>
                                    </div>
                                </div>

                                <!-- Response Template -->
                                <div class="form-group">
                                    <label for="responseTemplate">Response Template</label>
                                    <textarea id="responseTemplate" rows="6" placeholder="Variable: {name}\nValue: {value}\nDescription: {description}"></textarea>
                                    <small>Use {field_name} to insert database field values</small>
                                </div>

                                <!-- Configuration Options -->
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="priority">Priority</label>
                                        <input type="number" id="priority" value="50" min="1" max="100">
                                    </div>
                                    <div class="form-group">
                                        <label for="maxResults">Max Results</label>
                                        <input type="number" id="maxResults" value="5" min="1" max="20">
                                    </div>
                                </div>

                                <div class="form-group toggle-group">
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="isActive" checked>
                                        <span class="toggle-slider"></span>
                                        Active
                                    </label>
                                </div>

                                <!-- Test Section -->
                                <div class="test-section">
                                    <h4>Test Configuration</h4>
                                    <div class="form-group">
                                        <label for="testQuery">Test Query</label>
                                        <input type="text" id="testQuery" placeholder="tell me about variable pulse_rate">
                                        <button type="button" onclick="testTableConfig()" class="btn-small btn-primary">Test</button>
                                    </div>
                                    <div id="testResults" class="test-results"></div>
                                </div>

                                <div class="modal-actions">
                                    <button type="submit" class="btn-primary">Save Configuration</button>
                                    <button type="button" onclick="closeTableConfigModal()" class="btn-secondary">Cancel</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Console Section -->
            <section id="console" class="admin-section">
                <!-- Green Debug Console - Centered and 2/3 width -->
                <div class="console-container">
                    <div id="debugInfo" class="green-console">
                        <div class="console-header-row">
                            <strong>üîç Debug Console</strong>
                            <div class="console-mode-toggle-mini">
                                <button id="debugModeBtn" class="toggle-btn-mini active" onclick="switchConsoleMode('debug')">üîß Debug</button>
                                <button id="browserModeBtn" class="toggle-btn-mini" onclick="switchConsoleMode('browser')">üåê Browser</button>
                            </div>
                            <div class="console-controls">
                                <button onclick="clearDebugOutput()" class="console-btn clear-btn">Clear</button>
                                <button onclick="toggleDebugAutoScroll()" id="autoScrollBtn" class="console-btn auto-scroll-btn">Auto-scroll: ON</button>
                            </div>
                        </div>
                        <div id="debugOutput" class="green-console-output">
                            <div class="console-line success">[System] Debug console initialized. Type "help" to see available commands.</div>
                            <div class="console-line info">[Info] Console ready for debugging and API testing</div>
                        </div>
                        <div class="console-input-row">
                            <input type="text" id="debugCommand" placeholder="Enter command (help for list)" class="green-console-input">
                            <button onclick="executeDebugCommand()" class="console-btn run-btn">Run</button>
                            <div class="console-mode-indicator">
                                <span id="modeIndicator">Debug Mode</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <h2>Debug Console</h2>
                <p class="section-description">Interactive debugging console for testing APIs, monitoring connections, and troubleshooting issues in real-time.</p>
                
                <!-- Command Reference Info Box -->
                <div class="command-reference-box">
                    <div class="command-reference-header">
                        <h3>üìö Command Reference</h3>
                        <div class="reference-tabs">
                            <button class="reference-tab active" onclick="switchReferenceMode('debug')" id="debugRefTab">Debug Commands</button>
                            <button class="reference-tab" onclick="switchReferenceMode('browser')" id="browserRefTab">Browser Commands</button>
                            <button class="reference-tab" onclick="switchReferenceMode('settings')" id="settingsRefTab">Debug Settings</button>
                        </div>
                        <div class="reference-mode-indicator">
                            <span id="referenceMode">Debug Commands</span>
                        </div>
                    </div>
                    
                    <!-- Debug Commands Reference -->
                    <div id="debugCommandsRef" class="commands-list active">
                        <div class="command-category">
                            <h4>üîß System Commands</h4>
                            <div class="command-grid">
                                <div class="command-item">
                                    <code>help</code>
                                    <span>Show all available commands</span>
                                </div>
                                <div class="command-item">
                                    <code>status</code>
                                    <span>Check overall system status</span>
                                </div>
                                <div class="command-item">
                                    <code>time</code>
                                    <span>Display current date and time</span>
                                </div>
                                <div class="command-item">
                                    <code>clear</code>
                                    <span>Clear console output</span>
                                </div>
                                <div class="command-item">
                                    <code>memory</code>
                                    <span>Show browser memory usage</span>
                                </div>
                                <div class="command-item">
                                    <code>logs</code>
                                    <span>Display recent console logs</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="command-category">
                            <h4>üåä API Testing</h4>
                            <div class="command-grid">
                                <div class="command-item">
                                    <code>pulse</code>
                                    <span>Test PulseCore API connection</span>
                                </div>
                                <div class="command-item">
                                    <code>vars</code>
                                    <span>Test Variables API connection</span>
                                </div>
                                <div class="command-item">
                                    <code>db</code>
                                    <span>Test all database connections</span>
                                </div>
                                <div class="command-item">
                                    <code>api</code>
                                    <span>List all API endpoints</span>
                                </div>
                                <div class="command-item">
                                    <code>test [endpoint]</code>
                                    <span>Test specific endpoint (pulsecore, vars, etc.)</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="command-category">
                            <h4>ü§ñ SmartAIRouter Debug</h4>
                            <div class="command-grid">
                                <div class="command-item">
                                    <code>router</code>
                                    <span>Show recent SmartAIRouter debug logs</span>
                                </div>
                                <div class="command-item">
                                    <code>router live</code>
                                    <span>Start live SmartAIRouter monitoring</span>
                                </div>
                                <div class="command-item">
                                    <code>router stop</code>
                                    <span>Stop live monitoring</span>
                                </div>
                                <div class="command-item">
                                    <code>router clear</code>
                                    <span>Clear SmartAIRouter debug logs</span>
                                </div>
                                <div class="command-item">
                                    <code>router stats</code>
                                    <span>Show SmartAIRouter statistics</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Browser Commands Reference -->
                    <div id="browserCommandsRef" class="commands-list">
                        <div class="command-category">
                            <h4>‚ö° Quick Commands (No Variables Needed)</h4>
                            <div class="command-grid">
                                <div class="command-item">
                                    <code>performance.memory</code>
                                    <span>Memory usage info</span>
                                </div>
                                <div class="command-item">
                                    <code>performance.now()</code>
                                    <span>High precision timestamp</span>
                                </div>
                                <div class="command-item">
                                    <code>document.title</code>
                                    <span>Page title</span>
                                </div>
                                <div class="command-item">
                                    <code>window.location.href</code>
                                    <span>Current URL</span>
                                </div>
                                <div class="command-item">
                                    <code>document.readyState</code>
                                    <span>Document load state</span>
                                </div>
                                <div class="command-item">
                                    <code>navigator.userAgent</code>
                                    <span>Browser info</span>
                                </div>
                                <div class="command-item">
                                    <code>screen.width + 'x' + screen.height</code>
                                    <span>Screen resolution</span>
                                </div>
                                <div class="command-item">
                                    <code>document.cookie</code>
                                    <span>Page cookies</span>
                                </div>
                                <div class="command-item">
                                    <code>localStorage.length</code>
                                    <span>LocalStorage item count</span>
                                </div>
                                <div class="command-item">
                                    <code>sessionStorage.length</code>
                                    <span>SessionStorage item count</span>
                                </div>
                                <div class="command-item">
                                    <code>document.body.children.length</code>
                                    <span>Body child elements count</span>
                                </div>
                                <div class="command-item">
                                    <code>document.scripts.length</code>
                                    <span>Script tags count</span>
                                </div>
                                <div class="command-item">
                                    <code>document.styleSheets.length</code>
                                    <span>Stylesheets count</span>
                                </div>
                                <div class="command-item">
                                    <code>window.innerWidth + 'x' + window.innerHeight</code>
                                    <span>Viewport size</span>
                                </div>
                                <div class="command-item">
                                    <code>document.head.children.length</code>
                                    <span>Head elements count</span>
                                </div>
                                <div class="command-item">
                                    <code>document.images.length</code>
                                    <span>Images count</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="command-category">
                            <h4>üåê DOM Manipulation & Selection</h4>
                            <div class="command-grid">
                                <div class="command-item">
                                    <code>document.querySelector('.class')</code>
                                    <span>Select first matching element</span>
                                </div>
                                <div class="command-item">
                                    <code>document.querySelectorAll('.class')</code>
                                    <span>Select all matching elements</span>
                                </div>
                                <div class="command-item">
                                    <code>document.getElementById('id')</code>
                                    <span>Select element by ID</span>
                                </div>
                                <div class="command-item">
                                    <code>document.getElementsByTagName('div')</code>
                                    <span>Select elements by tag</span>
                                </div>
                                <div class="command-item">
                                    <code>document.createElement('div')</code>
                                    <span>Create new DOM element</span>
                                </div>
                                <div class="command-item">
                                    <code>element.appendChild(newElement)</code>
                                    <span>Add child element</span>
                                </div>
                                <div class="command-item">
                                    <code>element.remove()</code>
                                    <span>Remove element from DOM</span>
                                </div>
                                <div class="command-item">
                                    <code>element.innerHTML = 'content'</code>
                                    <span>Set element's HTML content</span>
                                </div>
                                <div class="command-item">
                                    <code>element.textContent = 'text'</code>
                                    <span>Set element's text content</span>
                                </div>
                                <div class="command-item">
                                    <code>element.setAttribute('name', 'value')</code>
                                    <span>Set element attribute</span>
                                </div>
                                <div class="command-item">
                                    <code>element.classList.add('class')</code>
                                    <span>Add CSS class to element</span>
                                </div>
                                <div class="command-item">
                                    <code>element.classList.remove('class')</code>
                                    <span>Remove CSS class from element</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="command-category">
                            <h4>üé® CSS & Styling</h4>
                            <div class="command-grid">
                                <div class="command-item">
                                    <code>element.style.backgroundColor = 'red'</code>
                                    <span>Set element background color</span>
                                </div>
                                <div class="command-item">
                                    <code>element.style.display = 'none'</code>
                                    <span>Hide element</span>
                                </div>
                                <div class="command-item">
                                    <code>getComputedStyle(element)</code>
                                    <span>Get computed CSS styles</span>
                                </div>
                                <div class="command-item">
                                    <code>document.body.style.filter = 'invert(1)'</code>
                                    <span>Invert page colors</span>
                                </div>
                                <div class="command-item">
                                    <code>element.getBoundingClientRect()</code>
                                    <span>Get element position/size</span>
                                </div>
                                <div class="command-item">
                                    <code>element.offsetWidth</code>
                                    <span>Get element width</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="command-category">
                            <h4>üåç Window & Location</h4>
                            <div class="command-grid">
                                <div class="command-item">
                                    <code>window.location.href</code>
                                    <span>Get/set current URL</span>
                                </div>
                                <div class="command-item">
                                    <code>window.location.reload()</code>
                                    <span>Reload the page</span>
                                </div>
                                <div class="command-item">
                                    <code>window.open('url', '_blank')</code>
                                    <span>Open new window/tab</span>
                                </div>
                                <div class="command-item">
                                    <code>window.innerWidth</code>
                                    <span>Get viewport width</span>
                                </div>
                                <div class="command-item">
                                    <code>window.innerHeight</code>
                                    <span>Get viewport height</span>
                                </div>
                                <div class="command-item">
                                    <code>window.scrollTo(0, 0)</code>
                                    <span>Scroll to position</span>
                                </div>
                                <div class="command-item">
                                    <code>window.history.back()</code>
                                    <span>Go back in history</span>
                                </div>
                                <div class="command-item">
                                    <code>document.title</code>
                                    <span>Get/set page title</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="command-category">
                            <h4>üîß Console & Debugging</h4>
                            <div class="command-grid">
                                <div class="command-item">
                                    <code>console.log('message')</code>
                                    <span>Log message to console</span>
                                </div>
                                <div class="command-item">
                                    <code>console.table(array)</code>
                                    <span>Display array/object as table</span>
                                </div>
                                <div class="command-item">
                                    <code>console.error('error')</code>
                                    <span>Log error message</span>
                                </div>
                                <div class="command-item">
                                    <code>console.warn('warning')</code>
                                    <span>Log warning message</span>
                                </div>
                                <div class="command-item">
                                    <code>console.time('timer')</code>
                                    <span>Start performance timer</span>
                                </div>
                                <div class="command-item">
                                    <code>console.timeEnd('timer')</code>
                                    <span>End performance timer</span>
                                </div>
                                <div class="command-item">
                                    <code>console.group('group name')</code>
                                    <span>Start console group</span>
                                </div>
                                <div class="command-item">
                                    <code>console.clear()</code>
                                    <span>Clear console</span>
                                </div>
                                <div class="command-item">
                                    <code>debugger</code>
                                    <span>Set breakpoint in code</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="command-category">
                            <h4>üè™ Storage & Data</h4>
                            <div class="command-grid">
                                <div class="command-item">
                                    <code>localStorage.setItem('key', 'value')</code>
                                    <span>Store data locally</span>
                                </div>
                                <div class="command-item">
                                    <code>localStorage.getItem('key')</code>
                                    <span>Get stored data</span>
                                </div>
                                <div class="command-item">
                                    <code>localStorage.clear()</code>
                                    <span>Clear all local storage</span>
                                </div>
                                <div class="command-item">
                                    <code>sessionStorage.setItem('key', 'value')</code>
                                    <span>Store session data</span>
                                </div>
                                <div class="command-item">
                                    <code>document.cookie</code>
                                    <span>Get/set cookies</span>
                                </div>
                                <div class="command-item">
                                    <code>indexedDB.open('dbname')</code>
                                    <span>Open IndexedDB database</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="command-category">
                            <h4>üåê Network & API</h4>
                            <div class="command-grid">
                                <div class="command-item">
                                    <code>fetch('/api/endpoint')</code>
                                    <span>Make HTTP request</span>
                                </div>
                                <div class="command-item">
                                    <code>fetch('/api', {method: 'POST', body: data})</code>
                                    <span>POST request with data</span>
                                </div>
                                <div class="command-item">
                                    <code>new XMLHttpRequest()</code>
                                    <span>Create XHR request</span>
                                </div>
                                <div class="command-item">
                                    <code>navigator.onLine</code>
                                    <span>Check if online</span>
                                </div>
                                <div class="command-item">
                                    <code>new WebSocket('ws://url')</code>
                                    <span>Create WebSocket connection</span>
                                </div>
                                <div class="command-item">
                                    <code>new EventSource('/stream')</code>
                                    <span>Server-sent events</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="command-category">
                            <h4>üéØ Events & Interaction</h4>
                            <div class="command-grid">
                                <div class="command-item">
                                    <code>element.addEventListener('click', fn)</code>
                                    <span>Add event listener</span>
                                </div>
                                <div class="command-item">
                                    <code>element.removeEventListener('click', fn)</code>
                                    <span>Remove event listener</span>
                                </div>
                                <div class="command-item">
                                    <code>element.click()</code>
                                    <span>Trigger click event</span>
                                </div>
                                <div class="command-item">
                                    <code>new Event('customEvent')</code>
                                    <span>Create custom event</span>
                                </div>
                                <div class="command-item">
                                    <code>element.dispatchEvent(event)</code>
                                    <span>Trigger custom event</span>
                                </div>
                                <div class="command-item">
                                    <code>document.activeElement</code>
                                    <span>Get currently focused element</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="command-category">
                            <h4>üìä Performance & Monitoring</h4>
                            <div class="command-grid">
                                <div class="command-item">
                                    <code>performance.now()</code>
                                    <span>High precision timestamp</span>
                                </div>
                                <div class="command-item">
                                    <code>performance.memory</code>
                                    <span>Memory usage info</span>
                                </div>
                                <div class="command-item">
                                    <code>performance.getEntries()</code>
                                    <span>Performance entries</span>
                                </div>
                                <div class="command-item">
                                    <code>performance.mark('marker')</code>
                                    <span>Create performance mark</span>
                                </div>
                                <div class="command-item">
                                    <code>performance.measure('name', 'start', 'end')</code>
                                    <span>Measure performance</span>
                                </div>
                                <div class="command-item">
                                    <code>new PerformanceObserver(callback)</code>
                                    <span>Observe performance metrics</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="command-category">
                            <h4>üì± Browser APIs</h4>
                            <div class="command-grid">
                                <div class="command-item">
                                    <code>navigator.geolocation.getCurrentPosition()</code>
                                    <span>Get user location</span>
                                </div>
                                <div class="command-item">
                                    <code>navigator.clipboard.writeText('text')</code>
                                    <span>Copy text to clipboard</span>
                                </div>
                                <div class="command-item">
                                    <code>Notification.requestPermission()</code>
                                    <span>Request notification permission</span>
                                </div>
                                <div class="command-item">
                                    <code>new Notification('title', {body: 'text'})</code>
                                    <span>Show notification</span>
                                </div>
                                <div class="command-item">
                                    <code>navigator.vibrate(200)</code>
                                    <span>Vibrate device</span>
                                </div>
                                <div class="command-item">
                                    <code>navigator.userAgent</code>
                                    <span>Get browser info</span>
                                </div>
                                <div class="command-item">
                                    <code>navigator.getBattery()</code>
                                    <span>Get battery status</span>
                                </div>
                                <div class="command-item">
                                    <code>screen.orientation.lock('portrait')</code>
                                    <span>Lock screen orientation</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="command-category">
                            <h4>üìÅ Files & Media</h4>
                            <div class="command-grid">
                                <div class="command-item">
                                    <code>new FileReader()</code>
                                    <span>Read file contents</span>
                                </div>
                                <div class="command-item">
                                    <code>new Blob(['content'], {type: 'text/plain'})</code>
                                    <span>Create blob object</span>
                                </div>
                                <div class="command-item">
                                    <code>URL.createObjectURL(blob)</code>
                                    <span>Create object URL</span>
                                </div>
                                <div class="command-item">
                                    <code>navigator.mediaDevices.getUserMedia()</code>
                                    <span>Access camera/microphone</span>
                                </div>
                                <div class="command-item">
                                    <code>new Audio('sound.mp3')</code>
                                    <span>Create audio element</span>
                                </div>
                                <div class="command-item">
                                    <code>document.createElement('video')</code>
                                    <span>Create video element</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="command-category">
                            <h4>üßÆ Data & Utilities</h4>
                            <div class="command-grid">
                                <div class="command-item">
                                    <code>JSON.stringify(object)</code>
                                    <span>Convert object to JSON</span>
                                </div>
                                <div class="command-item">
                                    <code>JSON.parse(string)</code>
                                    <span>Parse JSON string</span>
                                </div>
                                <div class="command-item">
                                    <code>Object.keys(object)</code>
                                    <span>Get object keys</span>
                                </div>
                                <div class="command-item">
                                    <code>Object.values(object)</code>
                                    <span>Get object values</span>
                                </div>
                                <div class="command-item">
                                    <code>Array.from(iterable)</code>
                                    <span>Create array from iterable</span>
                                </div>
                                <div class="command-item">
                                    <code>[...array].sort()</code>
                                    <span>Sort array (spread syntax)</span>
                                </div>
                                <div class="command-item">
                                    <code>new Set([1,2,2,3])</code>
                                    <span>Create set (unique values)</span>
                                </div>
                                <div class="command-item">
                                    <code>new Map([['key', 'value']])</code>
                                    <span>Create key-value map</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="command-category">
                            <h4>‚è∞ Time & Animation</h4>
                            <div class="command-grid">
                                <div class="command-item">
                                    <code>setTimeout(() => {}, 1000)</code>
                                    <span>Execute after delay</span>
                                </div>
                                <div class="command-item">
                                    <code>setInterval(() => {}, 1000)</code>
                                    <span>Execute repeatedly</span>
                                </div>
                                <div class="command-item">
                                    <code>requestAnimationFrame(callback)</code>
                                    <span>Smooth animation frame</span>
                                </div>
                                <div class="command-item">
                                    <code>new Date()</code>
                                    <span>Current date/time</span>
                                </div>
                                <div class="command-item">
                                    <code>Date.now()</code>
                                    <span>Current timestamp</span>
                                </div>
                                <div class="command-item">
                                    <code>element.animate(keyframes, options)</code>
                                    <span>Web Animations API</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="command-category">
                            <h4>üî¢ Math & Random</h4>
                            <div class="command-grid">
                                <div class="command-item">
                                    <code>Math.random()</code>
                                    <span>Random number 0-1</span>
                                </div>
                                <div class="command-item">
                                    <code>Math.floor(Math.random() * 10)</code>
                                    <span>Random integer 0-9</span>
                                </div>
                                <div class="command-item">
                                    <code>Math.round(4.7)</code>
                                    <span>Round to nearest integer</span>
                                </div>
                                <div class="command-item">
                                    <code>Math.max(...array)</code>
                                    <span>Find maximum value</span>
                                </div>
                                <div class="command-item">
                                    <code>Math.min(...array)</code>
                                    <span>Find minimum value</span>
                                </div>
                                <div class="command-item">
                                    <code>crypto.getRandomValues(new Uint8Array(10))</code>
                                    <span>Cryptographically secure random</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="command-category">
                            <h4>üî§ String & RegEx</h4>
                            <div class="command-grid">
                                <div class="command-item">
                                    <code>string.split(',')</code>
                                    <span>Split string into array</span>
                                </div>
                                <div class="command-item">
                                    <code>string.replace(/old/g, 'new')</code>
                                    <span>Replace with regex</span>
                                </div>
                                <div class="command-item">
                                    <code>string.match(/pattern/g)</code>
                                    <span>Find regex matches</span>
                                </div>
                                <div class="command-item">
                                    <code>string.toLowerCase()</code>
                                    <span>Convert to lowercase</span>
                                </div>
                                <div class="command-item">
                                    <code>string.trim()</code>
                                    <span>Remove whitespace</span>
                                </div>
                                <div class="command-item">
                                    <code>new RegExp('pattern', 'flags')</code>
                                    <span>Create regex pattern</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="command-category">
                            <h4>üîÑ Async & Promises</h4>
                            <div class="command-grid">
                                <div class="command-item">
                                    <code>await fetch('/api')</code>
                                    <span>Async/await API call</span>
                                </div>
                                <div class="command-item">
                                    <code>Promise.resolve(value)</code>
                                    <span>Create resolved promise</span>
                                </div>
                                <div class="command-item">
                                    <code>Promise.all([p1, p2, p3])</code>
                                    <span>Wait for all promises</span>
                                </div>
                                <div class="command-item">
                                    <code>Promise.race([p1, p2])</code>
                                    <span>First promise to resolve</span>
                                </div>
                                <div class="command-item">
                                    <code>new Promise((resolve, reject) => {})</code>
                                    <span>Create new promise</span>
                                </div>
                                <div class="command-item">
                                    <code>promise.then(result => {})</code>
                                    <span>Handle promise result</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Debug Settings Panel -->
                    <div id="debugSettingsRef" class="commands-list">
                        <div class="debug-settings-container">
                            <div class="settings-section">
                                <h4>‚öôÔ∏è Debug Configuration</h4>
                                <div class="settings-grid">
                                    
                                    <!-- Router Monitor Interval -->
                                    <div class="setting-item">
                                        <label for="routerInterval">Router Monitor Interval</label>
                                        <div class="setting-control">
                                            <select id="routerInterval" onchange="updateDebugSetting('router_monitor_interval', this.value)">
                                                <option value="1000">1 second</option>
                                                <option value="2000">2 seconds</option>
                                                <option value="5000">5 seconds</option>
                                                <option value="10000">10 seconds</option>
                                                <option value="30000" selected>30 seconds</option>
                                                <option value="60000">1 minute</option>
                                                <option value="0">Disabled</option>
                                            </select>
                                            <span class="setting-description">How often to poll for new debug logs</span>
                                        </div>
                                    </div>
                                    
                                    <!-- Max Debug Logs -->
                                    <div class="setting-item">
                                        <label for="maxDebugLogs">Max Debug Logs</label>
                                        <div class="setting-control">
                                            <input type="number" id="maxDebugLogs" min="100" max="10000" step="100" value="1000" 
                                                   onchange="updateDebugSetting('max_debug_logs', this.value)">
                                            <span class="setting-description">Maximum logs to store in database</span>
                                        </div>
                                    </div>
                                    
                                    <!-- Auto Clear Logs -->
                                    <div class="setting-item">
                                        <label for="autoClearLogs">Auto Clear Logs</label>
                                        <div class="setting-control">
                                            <label class="toggle-switch">
                                                <input type="checkbox" id="autoClearLogs" checked 
                                                       onchange="updateDebugSetting('auto_clear_logs', this.checked)">
                                                <span class="toggle-slider"></span>
                                            </label>
                                            <span class="setting-description">Automatically clear old logs when limit reached</span>
                                        </div>
                                    </div>
                                    
                                    <!-- Debug Enabled -->
                                    <div class="setting-item">
                                        <label for="debugEnabled">Debug Logging</label>
                                        <div class="setting-control">
                                            <label class="toggle-switch">
                                                <input type="checkbox" id="debugEnabled" checked 
                                                       onchange="updateDebugSetting('debug_enabled', this.checked)">
                                                <span class="toggle-slider"></span>
                                            </label>
                                            <span class="setting-description">Enable or disable all debug logging</span>
                                        </div>
                                    </div>
                                    
                                    <!-- Max Logs Display -->
                                    <div class="setting-item">
                                        <label for="maxLogsDisplay">Console Display Limit</label>
                                        <div class="setting-control">
                                            <input type="number" id="maxLogsDisplay" min="50" max="2000" step="50" value="500" 
                                                   onchange="updateDebugSetting('max_logs_display', this.value)">
                                            <span class="setting-description">Maximum logs to show in console</span>
                                        </div>
                                    </div>
                                    
                                    <!-- Auto Scroll -->
                                    <div class="setting-item">
                                        <label for="autoScrollEnabled">Auto Scroll</label>
                                        <div class="setting-control">
                                            <label class="toggle-switch">
                                                <input type="checkbox" id="autoScrollEnabled" checked 
                                                       onchange="updateDebugSetting('auto_scroll_enabled', this.checked)">
                                                <span class="toggle-slider"></span>
                                            </label>
                                            <span class="setting-description">Auto-scroll console to latest logs</span>
                                        </div>
                                    </div>
                                    
                                    <!-- Timestamp Format -->
                                    <div class="setting-item">
                                        <label for="timestampFormat">Timestamp Format</label>
                                        <div class="setting-control">
                                            <select id="timestampFormat" onchange="updateDebugSetting('timestamp_format', this.value)">
                                                <option value="HH:MM:SS" selected>HH:MM:SS</option>
                                                <option value="YYYY-MM-DD HH:MM:SS">Full DateTime</option>
                                                <option value="relative">Relative (1m ago)</option>
                                                <option value="none">No Timestamp</option>
                                            </select>
                                            <span class="setting-description">How to display log timestamps</span>
                                        </div>
                                    </div>
                                    
                                    <!-- Log Levels -->
                                    <div class="setting-item">
                                        <label>Log Levels</label>
                                        <div class="setting-control">
                                            <div class="log-levels-grid">
                                                <label class="log-level-item">
                                                    <input type="checkbox" id="logLevel_INFO" checked onchange="updateLogLevels()">
                                                    <span class="log-level-badge info">INFO</span>
                                                </label>
                                                <label class="log-level-item">
                                                    <input type="checkbox" id="logLevel_SUCCESS" checked onchange="updateLogLevels()">
                                                    <span class="log-level-badge success">SUCCESS</span>
                                                </label>
                                                <label class="log-level-item">
                                                    <input type="checkbox" id="logLevel_ERROR" checked onchange="updateLogLevels()">
                                                    <span class="log-level-badge error">ERROR</span>
                                                </label>
                                                <label class="log-level-item">
                                                    <input type="checkbox" id="logLevel_WARNING" checked onchange="updateLogLevels()">
                                                    <span class="log-level-badge warning">WARNING</span>
                                                </label>
                                            </div>
                                            <span class="setting-description">Which log levels to display</span>
                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <!-- Settings Actions -->
                            <div class="settings-actions">
                                <button class="btn btn-primary" onclick="saveDebugSettings()">
                                    üíæ Save All Settings
                                </button>
                                <button class="btn btn-secondary" onclick="loadDebugSettings()">
                                    üîÑ Reload Settings
                                </button>
                                <button class="btn btn-warning" onclick="resetDebugSettings()">
                                    ‚ö†Ô∏è Reset to Defaults
                                </button>
                                <div class="settings-status" id="settingsStatus"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Conversation View Modal -->
    <div id="conversationModal" class="modal-overlay hidden">
        <div class="modal-container">
            <div class="modal-header">
                <h2 id="conversationTitle">Conversation Details</h2>
                <button class="modal-close" onclick="closeConversationModal()">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="conversation-info">
                    <div class="info-row">
                        <span class="info-label">Conversation ID:</span>
                        <span id="conversationId">-</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Started:</span>
                        <span id="conversationStarted">-</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Total Messages:</span>
                        <span id="conversationMessages">-</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Duration:</span>
                        <span id="conversationDuration">-</span>
                    </div>
                </div>
                <div class="conversation-thread">
                    <h3>Message Thread</h3>
                    <div class="thread-container" id="threadContainer">
                        <div class="loading-spinner">Loading conversation...</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="../js/admin.js"></script>
</body>
</html>